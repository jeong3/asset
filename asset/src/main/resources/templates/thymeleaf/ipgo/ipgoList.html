<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<title>입고 목록</title>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js"></script>
<script>
function deleteIpgo(ipgoNum) {
	if (confirm("정말 삭제하시겠습니까?")) {
		$.ajax({
			type: "get",
			url: "/goodsIpgo/ipgoDelete",
			data: { ipgoNum: ipgoNum },
			success: function(response) {
				alert("삭제가 완료되었습니다.");
				window.location.reload();
			},
			error: function() {
				alert("서버 오류가 발생했습니다. 삭제할 수 없습니다.");
			},
			complete : ipgoList
		});
	} else {
		ipgoList();
	}
}
function ipgoList() {
	$.ajax({
		type: "get",
		url: "/goodsIpgo/ipgoList",
		dataType: "html",
		success: function(result) {
			$("#content").html(result);
		},
		error: function() {
			alert("서버 오류");
		}
	});
}
</script>
</head>
<body>
<body class="w3-content" style="max-width:1200px">

<div class="w3-top">
 <div class="w3-bar w3-theme-d2 w3-left-align">
  <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-hover-white w3-theme-d2" href="javascript:void(0);" onclick="openNav()"><i class="fa fa-bars"></i></a>
  <a href="/" class="w3-bar-item w3-button w3-teal"><i class="fa fa-home w3-margin-right"></i>Asset</a>
  <a href="/goods/goodsList" class="w3-bar-item w3-button w3-hide-small">쇼핑몰</a>
  <a href="/news/newsList" class="w3-bar-item w3-button w3-hide-small">뉴스</a>
  <a href="/stocks" class="w3-bar-item w3-button w3-hide-small">주식</a>
  
  <div class="w3-dropdown-hover w3-hide-small">
     <button class="w3-button" title="Notifications">회원관리 <i class="fa fa-caret-down"></i></button>
     <div class="w3-dropdown-content w3-card-4 w3-bar-block">
        <a href="/member/memberRegist" class="w3-bar-item w3-button">회원등록</a>
        <a href="/member/memberList" class="w3-bar-item w3-button">회원리스트</a>
    </div>
  </div>
  
  <div class="w3-dropdown-hover w3-hide-small">
     <button class="w3-button" title="Notifications">직원관리 <i class="fa fa-caret-down"></i></button>
     <div class="w3-dropdown-content w3-card-4 w3-bar-block">
        <a href="/employee/employeeRegist" class="w3-bar-item w3-button">직원등록</a>
        <a href="/employee/employeeList" class="w3-bar-item w3-button">직원리스트</a>
        <a href="/employee/departmentList" class="w3-bar-item w3-button">부서</a>
    </div>
  </div>
 
  <div class="w3-dropdown-hover w3-hide-small">
    <button class="w3-button" title="Notifications">상품 <i class="fa fa-caret-down"></i></button>     
    <div class="w3-dropdown-content w3-card-4 w3-bar-block">
        <a href="/goods/goodsList/강의" class="w3-bar-item w3-button">강의</a>
        <a href="/goods/goodsList/도서" class="w3-bar-item w3-button">도서</a>
      <a href="/goods/goodsRegist" class="w3-bar-item w3-button">상품등록</a>
      <a href="/goodsIpgo/ipgoList" class="w3-bar-item w3-button">입고현황</a>
    </div>
  </div>
  <div th:if="${session.auth != null}">
     <th:block th:if="${session.auth.grade == 'mem'}">
        <!-- 마이페이지 -->
        <div class="w3-dropdown-hover w3-hide-small">
           <button class="w3-button" title="Notifications">마이페이지 <i class="fa fa-caret-down"></i></button>     
           <div class="w3-dropdown-content w3-card-4 w3-bar-block">
              <a href="/myPage/memberMyDetail" class="w3-bar-item w3-button">내 정보 보기</a>
                 <a href="/myPage/memberMyPwUpdate" class="w3-bar-item w3-button">비밀번호 변경</a>
            </div>
        </div>
        
        <!-- 로그아웃 -->
        
     </th:block>
     <a href="/login/logout" class="w3-bar-item w3-button w3-hide-small" title="Search">로그아웃</a>
  </div>
  <div th:if="${session.auth == null}">
       <a href="/login/login" class="w3-bar-item w3-button w3-hide-small">로그인</a>
  </div>
  <a href="#" class="w3-bar-item w3-button w3-hide-small w3-right w3-hover-teal" title="Search"><i class="fa fa-search"></i></a>
 </div>
</div>
  <div align="center">
    <br/>
    <br/>
    <br/>
    <h2>입고 목록</h2>
    <a href="ipgoRegist">입고등록</a>
    <hr/>
  
    <table border="1" cellpadding="5" cellspacing="0" style="width: 80%; text-align: center;">
      <thead>
        <tr>
          <th>입고번호</th>
          <th>상품번호</th>
          <th>입고수량</th>
          <th>입고가격</th>
          <th>입고취소</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="dto : ${list}" th:data-ipgo-num="${dto.ipgoNum}">
          <td>[[${dto.ipgoNum}]]</td>
          <td>[[${dto.goodsNum}]]</td>
          <td>[[${dto.ipgoQty}]]</td>
          <td>[[${dto.ipgoPrice}]]</td>
          <td>
            <a  th:attr="onclick=|deleteIpgo('${dto.ipgoNum}')|" style="text-decoration: none;">×</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>
